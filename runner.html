<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoTest - –û–ª–∏–º–ø–∏–∞–¥–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0cf;
            --secondary: #6c0cf0;
            --accent: #ff00ff;
            --dark: #0a0a1a;
            --darker: #050510;
            --light: #e0f0ff;
            --success: #00ff9d;
            --warning: #ffcc00;
            --danger: #ff0066;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background:
                radial-gradient(ellipse at 20% 30%, rgba(0, 204, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(255, 0, 255, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 40% 80%, rgba(108, 12, 240, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 90% 70%, rgba(0, 255, 157, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #050510 0%, #0a0a1a 50%, #0d0d20 100%);
            background-attachment: fixed;
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            font-family: 'Exo 2', sans-serif;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 204, 255, 0.03) 2px, rgba(0, 204, 255, 0.03) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255, 0, 255, 0.03) 2px, rgba(255, 0, 255, 0.03) 4px);
            pointer-events: none;
            z-index: 0;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 204, 255, 0.12) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(255, 0, 255, 0.08) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
        body.light-theme {
            background: #f5f5f0;
            color: #2a2a2a;
        }

        body.light-theme::before,
        body.light-theme::after {
            opacity: 0;
        }

        body.light-theme .container {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(100, 180, 220, 0.3);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.1);
        }

        body.light-theme header {
            background: linear-gradient(90deg, #4a9fd8 0%, #64b5f6 100%);
        }

        body.light-theme #logoTitle {
            display: none;
        }

        body.light-theme .panel,
        body.light-theme .quiz-area,
        body.light-theme .question-item,
        body.light-theme .subquestion {
            background: rgba(240, 248, 255, 0.8);
            border-color: rgba(100, 180, 220, 0.2);
        }

        body.light-theme .panel-title {
            color: #4a9fd8;
        }

        body.light-theme .question-text,
        body.light-theme .subquestion-text,
        body.light-theme p,
        body.light-theme label,
        body.light-theme .description,
        body.light-theme .olympiad-title,
        body.light-theme .question-counter,
        body.light-theme .time-stat,
        body.light-theme .results-details,
        body.light-theme .score,
        body.light-theme .score-percent {
            color: #2a2a2a !important;
        }

        body.light-theme .status-passed {
            color: #2e7d32 !important;
        }

        body.light-theme .status-failed {
            color: #c62828 !important;
        }

        body.light-theme input,
        body.light-theme textarea {
            background: #ffffff;
            border: 1px solid #b0d4e8;
            color: #2a2a2a;
        }

        body.light-theme .btn-primary {
            background: linear-gradient(135deg, #4a9fd8 0%, #64b5f6 100%);
        }

        body.light-theme .btn-success {
            background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
        }

        body.light-theme .btn-secondary {
            background: rgba(120, 120, 120, 0.2);
            color: #2a2a2a;
        }

        body.light-theme .timer {
            background: rgba(74, 159, 216, 0.1);
            border-color: #4a9fd8;
            color: #2a2a2a;
        }

        body.light-theme .question-btn {
            background: rgba(240, 248, 255, 0.8);
            border-color: #b0d4e8;
            color: #2a2a2a;
        }

        body.light-theme .question-btn.current {
            background: #4a9fd8;
            color: white;
        }

        body.light-theme .question-btn.answered {
            background: #66bb6a;
            color: white;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(10, 10, 30, 0.85);
            border-radius: 20px;
            box-shadow: 0 0 40px rgba(0, 204, 255, 0.4), 0 0 80px rgba(255, 0, 255, 0.2);
            overflow: hidden;
            border: 1px solid rgba(0, 204, 255, 0.3);
            backdrop-filter: blur(15px);
        }

        header {
            background: linear-gradient(90deg, var(--dark) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .olympiad-title {
            font-size: 1rem;
            margin-bottom: 8px;
            color: var(--light);
            opacity: 0.9;
            font-weight: 500;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        h1 {
            margin-bottom: 5px;
            font-size: 2.5rem;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--primary));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .credits {
            font-size: 0.85rem;
            margin-top: 5px;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }

        .description {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        .content {
            padding: 25px;
        }

        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quiz-area {
            border: 1px solid rgba(0, 204, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            background: rgba(15, 15, 35, 0.7);
            min-height: 400px;
            position: relative;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.5;
            color: var(--light);
        }

        .question-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            margin: 15px 0;
            display: block;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid rgba(0, 204, 255, 0.3);
            box-shadow: 0 0 15px rgba(0, 204, 255, 0.2);
        }

        .subquestion {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid rgba(0, 204, 255, 0.2);
            border-radius: 10px;
            background: rgba(25, 25, 50, 0.5);
        }

        .subquestion-text {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--light);
        }

        .subquestion-points {
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .answer-input-container {
            margin: 15px 0;
        }

        .answer-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(0, 204, 255, 0.3);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            color: var(--light);
            font-family: 'Exo 2', sans-serif;
        }

        .answer-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 204, 255, 0.2);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ */
        .multiple-choice-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ */
        .multiple-numeric-answers {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .numeric-answer-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .numeric-answer-item label {
            min-width: 80px;
            font-size: 0.9rem;
            color: var(--accent);
        }

        .numeric-answer-item input {
            flex: 1;
            padding: 8px 12px;
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(0, 204, 255, 0.3);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--light);
        }

        .numeric-answer-item input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 204, 255, 0.2);
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ */
        body.light-theme .numeric-answer-item input {
            background: #ffffff;
            border-color: #b0d4e8;
            color: #2a2a2a;
        }

        body.light-theme .numeric-answer-item input:focus {
            border-color: #4a9fd8;
            box-shadow: 0 0 0 2px rgba(74, 159, 216, 0.2);
        }

        body.light-theme .numeric-answer-item label {
            color: #4a9fd8;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É */
        .multiple-answers-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .answer-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .answer-row input {
            flex: 1;
            padding: 8px 12px;
            background: rgba(20, 20, 40, 0.8);
            border: 1px solid rgba(0, 204, 255, 0.3);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--light);
        }

        .answer-row input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 204, 255, 0.2);
        }

        .add-answer-btn {
            padding: 6px 12px;
            background: rgba(0, 255, 157, 0.2);
            border: 1px solid var(--success);
            border-radius: 6px;
            color: var(--success);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s;
            min-width: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-answer-btn:hover {
            background: rgba(0, 255, 157, 0.3);
            transform: translateY(-1px);
        }

        .remove-answer-btn {
            padding: 6px 8px;
            background: rgba(255, 0, 102, 0.2);
            border: 1px solid var(--danger);
            border-radius: 6px;
            color: var(--danger);
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s;
            min-width: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-answer-btn:hover {
            background: rgba(255, 0, 102, 0.3);
            transform: translateY(-1px);
        }

        .answer-counter {
            font-size: 0.8rem;
            color: var(--accent);
            margin-bottom: 5px;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ */
        body.light-theme .answer-row input {
            background: #ffffff;
            border-color: #b0d4e8;
            color: #2a2a2a;
        }

        body.light-theme .answer-row input:focus {
            border-color: #4a9fd8;
            box-shadow: 0 0 0 2px rgba(74, 159, 216, 0.2);
        }

        body.light-theme .add-answer-btn {
            background: rgba(76, 175, 80, 0.2);
            border-color: #4caf50;
            color: #4caf50;
        }

        body.light-theme .add-answer-btn:hover {
            background: rgba(76, 175, 80, 0.3);
        }

        body.light-theme .remove-answer-btn {
            background: rgba(244, 67, 54, 0.2);
            border-color: #f44336;
            color: #f44336;
        }

        body.light-theme .remove-answer-btn:hover {
            background: rgba(244, 67, 54, 0.3);
        }

        body.light-theme .answer-counter {
            color: #4a9fd8;
        }

        .choice-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: rgba(20, 20, 40, 0.6);
            border: 2px solid rgba(0, 204, 255, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            color: var(--light);
        }

        .choice-option:hover {
            border-color: var(--primary);
            background: rgba(30, 30, 50, 0.8);
        }

        .choice-option.selected {
            border-color: var(--primary);
            background: rgba(0, 204, 255, 0.2);
            box-shadow: 0 0 10px rgba(0, 204, 255, 0.3);
        }

        .choice-option input[type="radio"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .choice-option label {
            cursor: pointer;
            flex: 1;
            margin: 0;
        }

        /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ */
        body.light-theme .choice-option {
            background: rgba(240, 248, 255, 0.8);
            border-color: rgba(100, 180, 220, 0.3);
            color: #2a2a2a;
        }

        body.light-theme .choice-option:hover {
            border-color: #4a9fd8;
            background: rgba(220, 240, 255, 0.9);
        }

        body.light-theme .choice-option.selected {
            border-color: #4a9fd8;
            background: rgba(74, 159, 216, 0.2);
            box-shadow: 0 0 10px rgba(74, 159, 216, 0.3);
        }

        body.light-theme .choice-option input[type="radio"] {
            accent-color: #4a9fd8;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .question-counter {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        .questions-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }

        .question-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(40, 40, 80, 0.7);
            border: 2px solid rgba(0, 204, 255, 0.3);
            cursor: pointer;
            transition: all 0.2s;
            color: var(--light);
            font-weight: 600;
            position: relative;
        }

        .question-btn.answered {
            background: rgba(0, 255, 157, 0.3);
            border-color: var(--success);
        }

        .question-btn.current {
            background: var(--primary);
            color: var(--dark);
            border-color: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }

        .question-btn.has-image::after {
            content: "üñº";
            font-size: 0.7rem;
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: var(--accent);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .question-btn.has-audio::before {
            content: "üîä";
            font-size: 0.7rem;
            position: absolute;
            bottom: -5px;
            left: -5px;
            background: var(--success);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .question-btn.has-image.has-audio::after {
            content: "üñºüîä";
            width: 32px;
        }

        .question-btn.has-image.has-audio::before {
            content: "";
        }

        .results-area {
            text-align: center;
            padding: 30px;
        }

        .score {
            font-size: 3rem;
            margin: 20px 0;
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 10px var(--primary);
        }

        .score-percent {
            font-size: 1.5rem;
            color: var(--light);
            margin-bottom: 20px;
        }

        .results-details {
            text-align: left;
            max-width: 700px;
            margin: 0 auto;
        }

        .result-item {
            padding: 15px;
            border-bottom: 1px solid rgba(0, 204, 255, 0.2);
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(20, 20, 40, 0.5);
        }

        .result-correct {
            border-left: 4px solid var(--success);
        }

        .result-incorrect {
            border-left: 4px solid var(--danger);
        }

        .correct-answer {
            color: var(--success);
            font-weight: bold;
        }

        .user-answer {
            font-weight: bold;
        }

        .user-answer.correct {
            color: var(--success);
        }

        .user-answer.incorrect {
            color: var(--danger);
        }

        .result-image {
            max-width: 200px;
            max-height: 150px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px 15px;
            background: rgba(0, 204, 255, 0.1);
            border-radius: 10px;
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            border: 1px solid rgba(0, 204, 255, 0.3);
            display: inline-block;
        }

        .timer.warning {
            color: var(--danger);
            background: rgba(255, 0, 102, 0.1);
            border-color: var(--danger);
            animation: pulse 1s infinite;
        }

        .question-timer {
            font-size: 1rem;
            margin: 5px 0;
            color: var(--warning);
            font-family: 'Orbitron', sans-serif;
            display: none;
        }

        .time-stats {
            margin: 20px 0;
            padding: 15px;
            background: rgba(20, 20, 40, 0.5);
            border-radius: 10px;
            border: 1px solid rgba(0, 204, 255, 0.2);
        }

        .time-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .time-stat:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Exo 2', sans-serif;
            position: relative;
            overflow: hidden;
        }

        button {
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        button:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 204, 255, 0.4);
        }

        .btn-secondary {
            background: rgba(60, 60, 100, 0.7);
            color: white;
        }

        .btn-secondary:hover {
            background: rgba(80, 80, 120, 0.9);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #00cc7a 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 157, 0.4);
        }

        .status-passed {
            color: var(--success);
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px var(--success);
        }

        .status-failed {
            color: var(--danger);
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px var(--danger);
        }

        .glow {
            text-shadow: 0 0 10px currentColor;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 40, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 15px;
                max-width: 100%;
            }

            header {
                padding: 15px 10px;
                position: relative;
            }

            header > div[style*="position: absolute"] {
                position: static !important;
                margin-bottom: 10px;
                justify-content: center;
            }

            .olympiad-title {
                font-size: 0.85rem;
                margin-bottom: 5px;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 5px;
            }

            .credits {
                font-size: 0.75rem;
                margin-top: 3px;
            }

            .description {
                font-size: 0.95rem;
            }

            .content {
                padding: 15px;
            }

            .panel, .quiz-area, .results-area {
                padding: 15px;
            }

            .panel-title {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }

            .timer {
                font-size: 1.5rem;
                padding: 12px;
                margin: 15px 0;
            }

            .question-counter {
                font-size: 0.95rem;
                margin: 10px 0;
            }

            .questions-menu {
                grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
                gap: 8px;
                padding: 12px;
                margin: 15px 0;
            }

            .question-btn {
                width: 45px;
                height: 45px;
                font-size: 0.9rem;
            }

            .question-text {
                font-size: 1rem;
                margin-bottom: 15px;
            }

            .question-image {
                max-width: 100%;
                max-height: 250px;
                margin: 15px 0;
            }

            .subquestion {
                padding: 12px;
                margin-bottom: 12px;
            }

            .subquestion-text {
                font-size: 0.95rem;
                margin-bottom: 10px;
            }

            input[type="number"] {
                font-size: 1rem;
                padding: 12px;
                -webkit-appearance: none;
                -moz-appearance: textfield;
            }

            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }

            button {
                width: 100%;
                padding: 14px 20px;
                font-size: 1rem;
            }

            .score {
                font-size: 2.5rem;
                margin: 15px 0;
            }

            .score-percent {
                font-size: 1.3rem;
            }

            .time-stats {
                padding: 12px;
                margin: 15px 0;
            }

            .time-stat {
                font-size: 0.9rem;
                padding: 8px 0;
            }

            .results-details {
                margin-top: 15px;
            }

            .result-question {
                padding: 12px;
                margin-bottom: 12px;
            }

            .result-subquestion {
                padding: 10px;
                margin: 8px 0;
                font-size: 0.9rem;
            }

            /* –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            p, label, span {
                line-height: 1.5;
            }

            /* –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
            .question-btn {
                min-height: 48px;
                min-width: 48px;
            }

            button {
                min-height: 48px;
            }

            /* –°–∫—Ä—ã—Ç–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ */
            * {
                animation-duration: 0s !important;
                transition-duration: 0.2s !important;
            }

            h1, h1 span {
                animation: none !important;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .questions-menu {
                grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
                gap: 6px;
            }

            .question-btn {
                width: 40px;
                height: 40px;
                font-size: 0.85rem;
            }

            .timer {
                font-size: 1.3rem;
                padding: 10px;
            }

            .score {
                font-size: 2rem;
            }

            input[type="number"] {
                font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
            }
        }
    </style>
    <script>
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É —Å—Ä–∞–∑—É, –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.documentElement.classList.add('light-theme-init');
    </script>
</head>
<body class="light-theme">
    <div class="container">
        <header>
            <div style="position: absolute; top: 15px; right: 25px; z-index: 10;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <span style="font-size: 0.9rem;">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</span>
                    <input type="checkbox" id="themeToggle" style="width: auto; cursor: pointer;" checked>
                </label>
            </div>
            <div class="olympiad-title" id="olympiadTitle">–û–ª–∏–º–ø–∏–∞–¥–∞</div>
            <h1 id="logoTitle">NEO<span style="-webkit-text-fill-color: transparent; background: linear-gradient(90deg, var(--accent), var(--primary), var(--accent)); background-size: 200% auto; -webkit-background-clip: text; background-clip: text; animation: shimmer 3s linear infinite;">TEST</span></h1>
            <div class="credits">–°–æ–∑–¥–∞–Ω–æ –∫–∞–Ω–∞–ª–æ–º "–†–µ–≥–∏–æ–Ω –¥–ª—è –≤—Å–µ—Ö"</div>
            <p class="description" id="testDescription">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö –Ω–∞—É–∫–∏</p>
        </header>

        <div class="content">
            <div class="quiz-area" id="quizArea">
                <div class="empty-state" id="emptyState">
                    –¢–µ—Å—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –í—Å—Ç–∞–≤—å—Ç–µ JSON —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –≤ –∫–æ–¥ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.
                </div>

                <div id="startScreen" style="display: none; text-align: center;">
                    <h2 class="panel-title" id="startTitle">–û–ª–∏–º–ø–∏–∞–¥–∞ –ø–æ –Ω–∞—É–∫–∞–º</h2>
                    <p style="margin: 20px 0;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø</p>
                    <div class="timer" id="totalTimer">15:00</div>
                    <p style="margin: 15px 0;">–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: <span id="startTotalQuestions">0</span></p>
                    <p style="margin: 15px 0;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª: <span id="startMaxPoints">0</span></p>
                    <p style="margin: 15px 0;">–ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª: <span id="startPassingPoints">0</span> –±–∞–ª–ª–æ–≤ (<span id="startPassingPercent">70</span>%)</p>
                    <button id="startButton" class="btn-primary" style="margin-top: 20px;">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                </div>

                <div id="quizContent" style="display: none;">
                    <div class="timer" id="timer">15:00</div>

                    <div class="questions-menu" id="questionsMenu"></div>

                    <div class="question-counter">
                        –í–æ–ø—Ä–æ—Å <span id="currentQuestionNumber">1</span> –∏–∑ <span id="totalQuestions">0</span>
                        <div class="question-timer" id="questionTimer">–í—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å: 0:00</div>
                    </div>

                    <div class="question-text" id="questionText"></div>

                    <div id="questionImageContainer"></div>

                    <div id="subquestionsContainer"></div>

                    <div class="navigation">
                        <button id="prevButton" class="btn-secondary">‚Üê –ù–∞–∑–∞–¥</button>
                        <button id="nextButton" class="btn-primary">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
                        <button id="finishButton" class="btn-success" style="display: none;">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç</button>
                    </div>
                </div>

                <div id="resultsContent" style="display: none;">
                    <div class="results-area">
                        <h2 class="panel-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                        <div class="score" id="scoreResult">0</div>
                        <div class="score-percent" id="scorePercent">0%</div>
                        <div id="testStatus" class="status-passed">–ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª!</div>

                        <div class="results-details" id="resultsDetails"></div>

                        <div class="time-stats">
                            <h3 style="margin-bottom: 15px; color: var(--primary);">–í—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                            <div class="time-stat">
                                <span>–û–±—â–µ–µ –≤—Ä–µ–º—è:</span>
                                <span id="totalTimeSpent">0:00</span>
                            </div>
                            <div class="time-stat">
                                <span>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å:</span>
                                <span id="averageTimePerQuestion">0:00</span>
                            </div>
                            <div id="questionTimesList"></div>
                        </div>

                        <button id="restartButton" class="btn-primary" style="margin-top: 20px;">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // IndexedDB –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞–º–∏
        // ============================================
        let db = null;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è IndexedDB
        function initDB() {
            const request = indexedDB.open('OlympiadMediaDB', 1);
            
            request.onerror = function() {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è IndexedDB');
            };
            
            request.onsuccess = function(event) {
                db = event.target.result;
            };
            
            request.onupgradeneeded = function(event) {
                db = event.target.result;
                
                if (!db.objectStoreNames.contains('mediaFiles')) {
                    const objectStore = db.createObjectStore('mediaFiles', { keyPath: 'id' });
                    objectStore.createIndex('type', 'type', { unique: false });
                }
            };
        }
        
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ IndexedDB
        function getFileFromIndexedDB(fileId) {
            return new Promise((resolve, reject) => {
                if (!db) {
                    reject('IndexedDB –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
                    return;
                }
                
                const transaction = db.transaction(['mediaFiles'], 'readonly');
                const objectStore = transaction.objectStore('mediaFiles');
                const request = objectStore.get(fileId);
                
                request.onsuccess = function() {
                    if (request.result) {
                        resolve(request.result);
                    } else {
                        reject('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    }
                };
                
                request.onerror = function() {
                    reject('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏–∑ IndexedDB');
                };
            });
        }

        // ============================================
        // –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –¢–ï–°–¢–ê
        // ============================================
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ—Å—Ç –∏–∑ localStorage –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç
        var testData = null;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–µ—Å—Ç –≤ localStorage
        const storedTest = localStorage.getItem('currentTest');
        if (storedTest) {
            try {
                testData = JSON.parse(storedTest);
                console.log('–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ localStorage:', testData.title);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ—Å—Ç–∞ –∏–∑ localStorage:', error);
            }
        }
        
        // –ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        if (!testData) {
            document.addEventListener('DOMContentLoaded', function() {
                document.body.innerHTML = `
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; text-align: center; padding: 20px;">
                        <h1 style="color: var(--primary); margin-bottom: 20px;">üèÜ NeoCreator</h1>
                        <h2 style="color: var(--light); margin-bottom: 30px;">–¢–µ—Å—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 30px; max-width: 500px;">
                            –î–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±—Ä–∞—Ç—å –µ–≥–æ –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.
                        </p>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                            <a href="runner-with-tests.html" style="padding: 12px 24px; background: linear-gradient(45deg, var(--primary), var(--secondary)); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
                                üìù –í—ã–±—Ä–∞—Ç—å —Ç–µ—Å—Ç
                            </a>
                        </div>
                    </div>
                `;
            });
        }



        // –î–µ–ª–∞–µ–º testData –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º
        window.testData = testData;

        // ============================================
        // –ö–û–ù–ï–¶ –í–°–¢–ê–í–ö–ò JSON
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º IndexedDB
            initDB();
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
            const testData = window.testData;

            // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            console.log('testData –∑–∞–≥—Ä—É–∂–µ–Ω:', testData);
            console.log('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:', testData?.questions?.length || 0);

            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const emptyState = document.getElementById('emptyState');
            const startScreen = document.getElementById('startScreen');
            const quizContent = document.getElementById('quizContent');
            const resultsContent = document.getElementById('resultsContent');
            const testDescription = document.getElementById('testDescription');
            const startTitle = document.getElementById('startTitle');
            const startTotalQuestions = document.getElementById('startTotalQuestions');
            const startMaxPoints = document.getElementById('startMaxPoints');
            const startPassingPoints = document.getElementById('startPassingPoints');
            const startPassingPercent = document.getElementById('startPassingPercent');
            const olympiadTitle = document.getElementById('olympiadTitle');
            const startButton = document.getElementById('startButton');
            const totalTimer = document.getElementById('totalTimer');
            const timerElement = document.getElementById('timer');
            const questionTimer = document.getElementById('questionTimer');
            const questionsMenu = document.getElementById('questionsMenu');
            const questionText = document.getElementById('questionText');
            const questionImageContainer = document.getElementById('questionImageContainer');
            const subquestionsContainer = document.getElementById('subquestionsContainer');
            const currentQuestionNumber = document.getElementById('currentQuestionNumber');
            const totalQuestions = document.getElementById('totalQuestions');
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            const finishButton = document.getElementById('finishButton');
            const scoreResult = document.getElementById('scoreResult');
            const scorePercent = document.getElementById('scorePercent');
            const testStatus = document.getElementById('testStatus');
            const totalTimeSpent = document.getElementById('totalTimeSpent');
            const averageTimePerQuestion = document.getElementById('averageTimePerQuestion');
            const questionTimesList = document.getElementById('questionTimesList');
            const resultsDetails = document.getElementById('resultsDetails');
            const restartButton = document.getElementById('restartButton');
            const themeToggle = document.getElementById('themeToggle');

            // –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞
            let currentQuestionIndex = 0;
            let userAnswers = [];
            let totalTimeLeft = 0;
            let totalTimerInterval;
            let questionStartTimes = [];
            let questionTimes = [];
            let testStartTime;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            startButton.addEventListener('click', startQuiz);
            prevButton.addEventListener('click', goToPreviousQuestion);
            nextButton.addEventListener('click', goToNextQuestion);
            finishButton.addEventListener('click', finishQuiz);
            restartButton.addEventListener('click', restartQuiz);
            themeToggle.addEventListener('change', function() {
                document.body.classList.toggle('light-theme');
            });

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
            initializeQuiz();

            function initializeQuiz() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ testData
                if (typeof testData === 'undefined' || testData === null) {
                    console.error('testData –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω');
                    emptyState.innerHTML = `
                        <h3 style="color: var(--danger); margin-bottom: 15px;">‚ùå –¢–µ—Å—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</h3>
                        <p style="margin-bottom: 10px;">JSON —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–¥–µ —Ñ–∞–π–ª–∞.</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">–í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞ –≤ —Å–µ–∫—Ü–∏—é &lt;script&gt; –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º &lt;/body&gt;</p>
                        <p style="font-size: 0.85rem; margin-top: 10px; color: var(--warning);">–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                    `;
                    emptyState.style.display = 'block';
                    return;
                }

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö
                if (!testData.questions || !Array.isArray(testData.questions) || testData.questions.length === 0) {
                    console.error('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ testData:', testData);
                    emptyState.innerHTML = `
                        <h3 style="color: var(--danger); margin-bottom: 15px;">‚ùå –û—à–∏–±–∫–∞ –≤ –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞</h3>
                        <p style="margin-bottom: 10px;">JSON –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –∏–º–µ–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.</p>
                        <p style="font-size: 0.9rem; opacity: 0.8;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞—Å—Å–∏–≤ questions —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏.</p>
                        <p style="font-size: 0.85rem; margin-top: 10px; color: var(--warning);">–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                    `;
                    emptyState.style.display = 'block';
                    return;
                }

                console.log('‚úÖ –¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω:', testData.title, '- –≤–æ–ø—Ä–æ—Å–æ–≤:', testData.questions.length);

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º —ç–∫—Ä–∞–Ω–µ
                testDescription.textContent = testData.description;
                startTitle.textContent = testData.title;
                olympiadTitle.textContent = testData.title;
                startTotalQuestions.textContent = testData.questions.length;

                // –í—ã—á–∏—Å–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª
                let maxPoints = 0;
                testData.questions.forEach(question => {
                    question.subquestions.forEach(subq => {
                        maxPoints += subq.points;
                    });
                });

                startMaxPoints.textContent = maxPoints;
                const passingPoints = Math.ceil(maxPoints * testData.passingScore / 100);
                startPassingPoints.textContent = passingPoints;
                startPassingPercent.textContent = testData.passingScore;

                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Ç–∞–π–º–µ—Ä
                totalTimeLeft = testData.timeLimit * 60;
                updateTotalTimerDisplay();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
                emptyState.style.display = 'none';
                startScreen.style.display = 'block';
                quizContent.style.display = 'none';
                resultsContent.style.display = 'none';
            }

            function startQuiz() {
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ—Å—Ç–∞
                currentQuestionIndex = 0;
                userAnswers = [];
                questionTimes = [];
                questionStartTimes = [];

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏
                testData.questions.forEach(question => {
                    const questionAnswers = [];
                    question.subquestions.forEach(() => {
                        questionAnswers.push(null);
                    });
                    userAnswers.push(questionAnswers);
                    questionStartTimes.push(null);
                    questionTimes.push(0);
                });

                // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞
                testStartTime = new Date();

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                startScreen.style.display = 'none';
                quizContent.style.display = 'block';
                resultsContent.style.display = 'none';

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
                totalQuestions.textContent = testData.questions.length;

                // –°–æ–∑–¥–∞–µ–º –º–µ–Ω—é –≤–æ–ø—Ä–æ—Å–æ–≤
                updateQuestionsMenu();

                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
                startTotalTimer();

                // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                questionStartTimes[0] = new Date();

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
                showQuestion();
            }

            function startTotalTimer() {
                clearInterval(totalTimerInterval);
                updateTotalTimerDisplay();

                totalTimerInterval = setInterval(() => {
                    totalTimeLeft--;
                    updateTotalTimerDisplay();

                    if (totalTimeLeft <= 0) {
                        clearInterval(totalTimerInterval);
                        finishQuiz();
                    }
                }, 1000);
            }

            function updateTotalTimerDisplay() {
                const minutes = Math.floor(totalTimeLeft / 60);
                const seconds = totalTimeLeft % 60;
                const timerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                timerElement.textContent = timerText;
                totalTimer.textContent = timerText;

                if (totalTimeLeft <= 60) {
                    timerElement.classList.add('warning');
                } else {
                    timerElement.classList.remove('warning');
                }
            }

            function updateQuestionsMenu() {
                questionsMenu.innerHTML = '';

                testData.questions.forEach((question, index) => {
                    const btn = document.createElement('div');
                    btn.className = 'question-btn';
                    btn.textContent = index + 1;

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–∏ –æ—Ç–≤–µ—á–µ–Ω –≤–æ–ø—Ä–æ—Å
                    let allAnswered = true;
                    userAnswers[index].forEach(answer => {
                        if (answer === null) allAnswered = false;
                    });

                    if (allAnswered) {
                        btn.classList.add('answered');
                    }

                    if (index === currentQuestionIndex) {
                        btn.classList.add('current');
                    }

                    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –º–µ–¥–∏–∞
                    if (question.image) {
                        btn.classList.add('has-image');
                    }
                    if (question.audio) {
                        btn.classList.add('has-audio');
                    }

                    btn.addEventListener('click', () => goToQuestion(index));
                    questionsMenu.appendChild(btn);
                });
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞—É–¥–∏–æ
            async function handleAudioDisplay(audioData, container) {
                try {
                    const audio = document.createElement('audio');
                    audio.controls = true;
                    audio.className = 'question-audio';
                    audio.style.cssText = 'width: 100%; max-width: 400px; margin-top: 10px;';
                    
                    if (typeof audioData === 'string') {
                        // –û–±—ã—á–Ω—ã–π Base64 —Ñ–æ—Ä–º–∞—Ç
                        audio.src = audioData;
                    } else if (audioData && audioData.type === 'indexeddb') {
                        // –ê—É–¥–∏–æ –∏–∑ IndexedDB
                        try {
                            const fileData = await getFileFromIndexedDB(audioData.fileId);
                            const blobUrl = URL.createObjectURL(fileData.data);
                            audio.src = blobUrl;
                            
                            // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º URL –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
                            audio.addEventListener('ended', () => {
                                URL.revokeObjectURL(blobUrl);
                            });
                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ –∏–∑ IndexedDB:', error);
                            // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫—É
                            const errorDiv = document.createElement('div');
                            errorDiv.textContent = `‚ö†Ô∏è –ê—É–¥–∏–æ—Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (${audioData.fileName || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–∞–π–ª'})`;
                            errorDiv.style.cssText = 'color: var(--danger); margin-top: 10px; padding: 10px; border: 1px solid var(--danger); border-radius: 4px;';
                            container.appendChild(errorDiv);
                            return;
                        }
                    }
                    
                    container.appendChild(audio);
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞—É–¥–∏–æ:', error);
                }
            }

            function showQuestion() {
                const question = testData.questions[currentQuestionIndex];

                // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞
                currentQuestionNumber.textContent = currentQuestionIndex + 1;

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
                questionText.textContent = question.text;

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –∞—É–¥–∏–æ, –µ—Å–ª–∏ –µ—Å—Ç—å
                questionImageContainer.innerHTML = '';
                if (question.image) {
                    const img = document.createElement('img');
                    img.src = question.image;
                    img.alt = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞';
                    img.className = 'question-image';
                    questionImageContainer.appendChild(img);
                }
                if (question.audio) {
                    handleAudioDisplay(question.audio, questionImageContainer);
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥–≤–æ–ø—Ä–æ—Å—ã
                subquestionsContainer.innerHTML = '';
                question.subquestions.forEach((subq, index) => {
                    const subquestionElement = document.createElement('div');
                    subquestionElement.className = 'subquestion';

                    let answerInputHTML = '';
                    
                    if (subq.type === 'multiple_choice' && subq.options) {
                        // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
                        answerInputHTML = `
                            <div class="multiple-choice-options">
                                ${subq.options.map((option, optIndex) => `
                                    <div class="choice-option ${userAnswers[currentQuestionIndex][index] === option ? 'selected' : ''}">
                                        <input type="radio" 
                                               name="q${currentQuestionIndex}_s${index}" 
                                               value="${option}"
                                               data-question="${currentQuestionIndex}"
                                               data-subquestion="${index}"
                                               ${userAnswers[currentQuestionIndex][index] === option ? 'checked' : ''}>
                                        <label>${option}</label>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    } else if (subq.type === 'multiple_numeric' && subq.answerFields) {
                        // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                        const currentAnswers = userAnswers[currentQuestionIndex][index] || {};
                        answerInputHTML = `
                            <div class="multiple-numeric-answers">
                                ${subq.answerFields.map((field, fieldIndex) => `
                                    <div class="numeric-answer-item">
                                        <label>${field.label}:</label>
                                        <input type="text" 
                                               class="numeric-input"
                                               data-question="${currentQuestionIndex}"
                                               data-subquestion="${index}"
                                               data-field="${field.key}"
                                               placeholder="${field.placeholder || '–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç'}"
                                               value="${currentAnswers[field.key] || ''}">
                                    </div>
                                `).join('')}
                            </div>
                        `;
                    } else {
                        // –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                        const currentAnswers = userAnswers[currentQuestionIndex][index];
                        let answersArray = [];
                        
                        if (Array.isArray(currentAnswers)) {
                            answersArray = currentAnswers;
                        } else if (currentAnswers !== null && currentAnswers !== undefined) {
                            answersArray = [currentAnswers];
                        } else {
                            answersArray = [''];
                        }
                        
                        if (answersArray.length === 0) {
                            answersArray = [''];
                        }

                        answerInputHTML = `
                            <div class="answer-input-container">
                                <div class="answer-counter">–û—Ç–≤–µ—Ç–æ–≤: <span class="answer-count">${answersArray.filter(a => a.trim() !== '').length}</span></div>
                                <div class="multiple-answers-container" data-question="${currentQuestionIndex}" data-subquestion="${index}">
                                    ${answersArray.map((answer, answerIndex) => `
                                        <div class="answer-row">
                                            <input type="text" class="multiple-answer-input"
                                                   data-question="${currentQuestionIndex}"
                                                   data-subquestion="${index}"
                                                   data-answer-index="${answerIndex}"
                                                   placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç ${answerIndex + 1}"
                                                   value="${answer}">
                                            ${answerIndex === answersArray.length - 1 ? 
                                                '<button type="button" class="add-answer-btn" title="–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç">+</button>' : 
                                                (answersArray.length > 1 ? '<button type="button" class="remove-answer-btn" title="–£–¥–∞–ª–∏—Ç—å –æ—Ç–≤–µ—Ç">√ó</button>' : '<button type="button" class="add-answer-btn" title="–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç">+</button>')}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    }

                    subquestionElement.innerHTML = `
                        <div class="subquestion-text">${index + 1}. ${subq.text}</div>
                        <div class="subquestion-points">–ë–∞–ª–ª—ã: ${subq.points}</div>
                        ${answerInputHTML}
                    `;

                    subquestionsContainer.appendChild(subquestionElement);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                const answerInputs = document.querySelectorAll('.subquestion-answer');
                answerInputs.forEach(input => {
                    input.addEventListener('input', saveAnswer);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–æ–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
                const radioInputs = document.querySelectorAll('input[type="radio"]');
                radioInputs.forEach(input => {
                    input.addEventListener('change', saveAnswer);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–ª–∏–∫–æ–≤ –ø–æ –æ–ø—Ü–∏—è–º
                const choiceOptions = document.querySelectorAll('.choice-option');
                choiceOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const radio = this.querySelector('input[type="radio"]');
                        if (radio) {
                            radio.checked = true;
                            radio.dispatchEvent(new Event('change'));
                        }
                    });
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                const numericInputs = document.querySelectorAll('.numeric-input');
                numericInputs.forEach(input => {
                    input.addEventListener('input', saveMultipleNumericAnswer);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
                const multipleAnswerInputs = document.querySelectorAll('.multiple-answer-input');
                multipleAnswerInputs.forEach(input => {
                    input.addEventListener('input', saveMultipleAnswer);
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
                const addAnswerBtns = document.querySelectorAll('.add-answer-btn');
                addAnswerBtns.forEach(btn => {
                    btn.addEventListener('click', addAnswerField);
                });

                const removeAnswerBtns = document.querySelectorAll('.remove-answer-btn');
                removeAnswerBtns.forEach(btn => {
                    btn.addEventListener('click', removeAnswerField);
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                updateNavigationButtons();

                // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ–Ω—é –≤–æ–ø—Ä–æ—Å–æ–≤
                updateQuestionsMenu();
            }

            function saveAnswer(event) {
                const input = event.target;
                const questionIndex = parseInt(input.dataset.question);
                const subquestionIndex = parseInt(input.dataset.subquestion);
                
                let value;
                if (input.type === 'radio') {
                    value = input.value;
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ü–∏–π
                    const allOptions = document.querySelectorAll(`input[name="q${questionIndex}_s${subquestionIndex}"]`);
                    allOptions.forEach(option => {
                        const choiceOption = option.closest('.choice-option');
                        if (option.checked) {
                            choiceOption.classList.add('selected');
                        } else {
                            choiceOption.classList.remove('selected');
                        }
                    });
                } else {
                    value = input.value.trim();
                    if (value === '') {
                        value = null;
                    }
                }

                userAnswers[questionIndex][subquestionIndex] = value;
                updateQuestionsMenu();
            }

            function saveMultipleNumericAnswer(event) {
                const input = event.target;
                const questionIndex = parseInt(input.dataset.question);
                const subquestionIndex = parseInt(input.dataset.subquestion);
                const fieldKey = input.dataset.field;
                const value = input.value.trim();

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–æ–≤, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                if (!userAnswers[questionIndex][subquestionIndex]) {
                    userAnswers[questionIndex][subquestionIndex] = {};
                }

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è
                if (value === '') {
                    delete userAnswers[questionIndex][subquestionIndex][fieldKey];
                } else {
                    userAnswers[questionIndex][subquestionIndex][fieldKey] = value;
                }

                // –ï—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è –ø—É—Å—Ç—ã, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º null
                if (Object.keys(userAnswers[questionIndex][subquestionIndex]).length === 0) {
                    userAnswers[questionIndex][subquestionIndex] = null;
                }

                updateQuestionsMenu();
            }

            function saveMultipleAnswer(event) {
                const input = event.target;
                const questionIndex = parseInt(input.dataset.question);
                const subquestionIndex = parseInt(input.dataset.subquestion);
                const answerIndex = parseInt(input.dataset.answerIndex);
                const value = input.value.trim();

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –æ—Ç–≤–µ—Ç–æ–≤, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                if (!Array.isArray(userAnswers[questionIndex][subquestionIndex])) {
                    userAnswers[questionIndex][subquestionIndex] = [];
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤–µ
                userAnswers[questionIndex][subquestionIndex][answerIndex] = value;

                // –£–¥–∞–ª—è–µ–º –ø—É—Å—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–æ–Ω—Ü–∞ –º–∞—Å—Å–∏–≤–∞
                while (userAnswers[questionIndex][subquestionIndex].length > 1 && 
                       userAnswers[questionIndex][subquestionIndex][userAnswers[questionIndex][subquestionIndex].length - 1] === '') {
                    userAnswers[questionIndex][subquestionIndex].pop();
                }

                // –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ –ø—É—Å—Ç–æ–π –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º null
                if (userAnswers[questionIndex][subquestionIndex].every(answer => answer === '')) {
                    userAnswers[questionIndex][subquestionIndex] = null;
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤
                updateAnswerCounter(questionIndex, subquestionIndex);
                updateQuestionsMenu();
            }

            function addAnswerField(event) {
                const btn = event.target;
                const answerRow = btn.closest('.answer-row');
                const container = btn.closest('.multiple-answers-container');
                const questionIndex = parseInt(container.dataset.question);
                const subquestionIndex = parseInt(container.dataset.subquestion);

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –æ—Ç–≤–µ—Ç–æ–≤, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
                if (!Array.isArray(userAnswers[questionIndex][subquestionIndex])) {
                    const currentValue = userAnswers[questionIndex][subquestionIndex];
                    userAnswers[questionIndex][subquestionIndex] = currentValue ? [currentValue] : [''];
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç
                userAnswers[questionIndex][subquestionIndex].push('');

                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å
                showQuestion();
            }

            function removeAnswerField(event) {
                const btn = event.target;
                const answerRow = btn.closest('.answer-row');
                const container = btn.closest('.multiple-answers-container');
                const questionIndex = parseInt(container.dataset.question);
                const subquestionIndex = parseInt(container.dataset.subquestion);
                const input = answerRow.querySelector('.multiple-answer-input');
                const answerIndex = parseInt(input.dataset.answerIndex);

                // –£–¥–∞–ª—è–µ–º –æ—Ç–≤–µ—Ç –∏–∑ –º–∞—Å—Å–∏–≤–∞
                if (Array.isArray(userAnswers[questionIndex][subquestionIndex])) {
                    userAnswers[questionIndex][subquestionIndex].splice(answerIndex, 1);
                    
                    // –ï—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—É—Å—Ç–æ–π —ç–ª–µ–º–µ–Ω—Ç, –æ—Å—Ç–∞–≤–ª—è–µ–º –µ–≥–æ
                    if (userAnswers[questionIndex][subquestionIndex].length === 0) {
                        userAnswers[questionIndex][subquestionIndex] = [''];
                    }
                }

                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å
                showQuestion();
            }

            function updateAnswerCounter(questionIndex, subquestionIndex) {
                const container = document.querySelector(`[data-question="${questionIndex}"][data-subquestion="${subquestionIndex}"]`);
                if (container) {
                    const counter = container.closest('.answer-input-container').querySelector('.answer-count');
                    if (counter && Array.isArray(userAnswers[questionIndex][subquestionIndex])) {
                        const nonEmptyAnswers = userAnswers[questionIndex][subquestionIndex].filter(a => a.trim() !== '').length;
                        counter.textContent = nonEmptyAnswers;
                    }
                }
            }

            function goToQuestion(index) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                if (questionStartTimes[currentQuestionIndex]) {
                    const timeSpent = Math.floor((new Date() - questionStartTimes[currentQuestionIndex]) / 1000);
                    questionTimes[currentQuestionIndex] += timeSpent;
                }

                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –Ω–æ–≤–æ–º—É –≤–æ–ø—Ä–æ—Å—É
                currentQuestionIndex = index;

                // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –Ω–æ–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                if (!questionStartTimes[index]) {
                    questionStartTimes[index] = new Date();
                } else {
                    questionStartTimes[index] = new Date();
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å
                showQuestion();
            }

            function updateNavigationButtons() {
                // –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
                prevButton.style.display = currentQuestionIndex > 0 ? 'block' : 'none';

                // –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" / "–ó–∞–≤–µ—Ä—à–∏—Ç—å"
                if (currentQuestionIndex < testData.questions.length - 1) {
                    nextButton.style.display = 'block';
                    finishButton.style.display = 'none';
                } else {
                    nextButton.style.display = 'none';
                    finishButton.style.display = 'block';
                }
            }

            function goToPreviousQuestion() {
                if (currentQuestionIndex > 0) {
                    goToQuestion(currentQuestionIndex - 1);
                }
            }

            function goToNextQuestion() {
                if (currentQuestionIndex < testData.questions.length - 1) {
                    goToQuestion(currentQuestionIndex + 1);
                }
            }

            function finishQuiz() {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
                if (questionStartTimes[currentQuestionIndex]) {
                    const timeSpent = Math.floor((new Date() - questionStartTimes[currentQuestionIndex]) / 1000);
                    questionTimes[currentQuestionIndex] += timeSpent;
                }

                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
                clearInterval(totalTimerInterval);

                // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
                const testEndTime = new Date();
                const totalTimeSpentSeconds = Math.floor((testEndTime - testStartTime) / 1000);

                // –°–∫—Ä—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                quizContent.style.display = 'none';
                resultsContent.style.display = 'block';

                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                let totalPoints = 0;
                let maxPoints = 0;
                let resultsHTML = '';

                testData.questions.forEach((question, qIndex) => {
                    resultsHTML += `
                        <div class="result-item">
                            <p><strong>–í–æ–ø—Ä–æ—Å ${qIndex + 1}:</strong> ${question.text}</p>
                    `;

                    if (question.image) {
                        resultsHTML += `<img src="${question.image}" class="result-image" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞">`;
                    }
                    
                    if (question.audio) {
                        if (typeof question.audio === 'string') {
                            resultsHTML += `<audio controls class="result-audio" style="width: 100%; max-width: 300px; margin: 10px 0;"><source src="${question.audio}">–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.</audio>`;
                        } else if (question.audio && question.audio.type === 'indexeddb') {
                            resultsHTML += `<div style="margin: 10px 0; padding: 10px; background: var(--background-alt); border-radius: 4px;">üîä –ê—É–¥–∏–æ—Ñ–∞–π–ª: ${question.audio.fileName || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–∞–π–ª'}</div>`;
                        }
                    }

                    question.subquestions.forEach((subq, sIndex) => {
                        maxPoints += subq.points;
                        const userAnswer = userAnswers[qIndex][sIndex];
                        let isCorrect = false;
                        let userAnswerDisplay = '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞';
                        let correctAnswerDisplay = Array.isArray(subq.answer) ? subq.answer.join(', ') : subq.answer;

                        if (subq.type === 'multiple_numeric' && subq.answerFields) {
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                            isCorrect = true;
                            const userAnswerParts = [];
                            const correctAnswerParts = [];
                            
                            subq.answerFields.forEach(field => {
                                const userValue = userAnswer && userAnswer[field.key] ? userAnswer[field.key] : '';
                                const correctValue = subq.answer[field.key];
                                
                                userAnswerParts.push(`${field.label}: ${userValue || '–Ω–µ —É–∫–∞–∑–∞–Ω–æ'}`);
                                correctAnswerParts.push(`${field.label}: ${correctValue}`);
                                
                                if (userValue != correctValue) {
                                    isCorrect = false;
                                }
                            });
                            
                            userAnswerDisplay = userAnswerParts.join(', ');
                            correctAnswerDisplay = correctAnswerParts.join(', ');
                        } else {
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ã—á–Ω—ã—Ö –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                            if (Array.isArray(userAnswer)) {
                                // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã - –ø—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ
                                const nonEmptyAnswers = userAnswer.filter(a => a.trim() !== '');
                                if (subq.type === 'multiple_answers') {
                                    // –î–ª—è —Ç–∏–ø–∞ multiple_answers –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –í–°–ï –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                                    if (Array.isArray(subq.answer)) {
                                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–≤–µ–¥–µ–Ω—ã –í–°–ï –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –ù–ï–¢ –ª–∏—à–Ω–∏—Ö
                                        const sortedUserAnswers = nonEmptyAnswers.map(a => a.trim()).sort();
                                        const sortedCorrectAnswers = subq.answer.map(a => a.trim()).sort();
                                        isCorrect = sortedUserAnswers.length === sortedCorrectAnswers.length &&
                                                   sortedUserAnswers.every((answer, index) => answer === sortedCorrectAnswers[index]);
                                    } else {
                                        // –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ–¥–∏–Ω, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
                                        isCorrect = nonEmptyAnswers.length === 1 && nonEmptyAnswers[0].trim() === subq.answer.trim();
                                    }
                                } else {
                                    // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
                                    isCorrect = nonEmptyAnswers.some(answer => answer.trim() == subq.answer);
                                }
                                userAnswerDisplay = nonEmptyAnswers.length > 0 ? nonEmptyAnswers.join(', ') : '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞';
                            } else {
                                // –û–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
                                if (Array.isArray(subq.answer)) {
                                    // –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –æ–¥–∏–Ω
                                    isCorrect = subq.answer.some(correctAnswer => userAnswer == correctAnswer);
                                } else {
                                    isCorrect = userAnswer == subq.answer;
                                }
                                userAnswerDisplay = userAnswer !== null ? userAnswer : '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞';
                            }
                        }

                        if (isCorrect) {
                            totalPoints += subq.points;
                        }

                        resultsHTML += `
                            <div class="subquestion ${isCorrect ? 'result-correct' : 'result-incorrect'}">
                                <div class="subquestion-text">${sIndex + 1}. ${subq.text}</div>
                                <p>–í–∞—à –æ—Ç–≤–µ—Ç: <span class="user-answer ${isCorrect ? 'correct' : 'incorrect'}">${userAnswerDisplay}</span></p>
                                <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <span class="correct-answer">${correctAnswerDisplay}</span></p>
                                <p>–ë–∞–ª–ª—ã: ${isCorrect ? subq.points : 0} –∏–∑ ${subq.points}</p>
                            </div>
                        `;
                    });

                    resultsHTML += `</div>`;
                });

                // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç
                const percent = Math.round((totalPoints / maxPoints) * 100);

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∞
                const passed = percent >= testData.passingScore;

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                scoreResult.textContent = `${totalPoints} / ${maxPoints}`;
                scorePercent.textContent = `${percent}%`;

                if (passed) {
                    testStatus.textContent = "–ü—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª!";
                    testStatus.className = "status-passed";
                } else {
                    testStatus.textContent = "–ù–µ –ø—Ä–æ—Ö–æ–¥–Ω–æ–π –±–∞–ª–ª";
                    testStatus.className = "status-failed";
                }

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                const totalMinutes = Math.floor(totalTimeSpentSeconds / 60);
                const totalSeconds = totalTimeSpentSeconds % 60;
                totalTimeSpent.textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;

                // –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å
                const avgTime = Math.round(totalTimeSpentSeconds / testData.questions.length);
                const avgMinutes = Math.floor(avgTime / 60);
                const avgSeconds = avgTime % 60;
                averageTimePerQuestion.textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;

                // –í—Ä–µ–º—è –Ω–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å
                questionTimesList.innerHTML = '<h4 style="margin: 15px 0 10px; color: var(--accent);">–í—Ä–µ–º—è –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º:</h4>';
                questionTimes.forEach((time, index) => {
                    const minutes = Math.floor(time / 60);
                    const seconds = time % 60;
                    questionTimesList.innerHTML += `
                        <div class="time-stat">
                            <span>–í–æ–ø—Ä–æ—Å ${index + 1}:</span>
                            <span>${minutes}:${seconds.toString().padStart(2, '0')}</span>
                        </div>
                    `;
                });

                resultsDetails.innerHTML = resultsHTML;
            }

            function restartQuiz() {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ —Å—Ç–∞—Ä—Ç–æ–≤–æ–º—É —ç–∫—Ä–∞–Ω—É
                startScreen.style.display = 'block';
                resultsContent.style.display = 'none';

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
                totalTimeLeft = testData.timeLimit * 60;
                updateTotalTimerDisplay();
            }
        });
    </script>
</body>
</html>